<!DOCTYPE html>
<html>
  <head>
    <title>FUNC_008</title><meta charset="utf-8">
    <style>
      body {
        text-align: center;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>FUNC_008</h1>
    <h2>Данил Демашов</h2>
    <div>
      <h3>Function 0</h3>
      <input type="number" class="function_0" />
      <input type="number" class="function_0"/>
      <input type="number" class="function_0"/>
      <input type="number" class="function_0"/>
      <button id="btn_func_0">Нулевая</button>
    </div>
    <div id="wrap_func_1">
      <h3>Function 1</h3>
      <label>Количество аргументов: <input type="number" class="function_1" min="0" /></label>
      <button id="btn_func_in_1">Выбрать</button>
    </div>
    <script>
      {
        (async () => {
          let functions = await fetch('http://3336.kodaktor.ru/funcpsst', { method: 'POST' }).then(r => r.json()).then(({ g }) => g.map(f => new Function('[...x]', f)));
          document.querySelector('#btn_func_0').addEventListener('click', ({ target: t }) => {
            let args = [...document.querySelectorAll('.function_0')].map(input => +input.value);
            t.textContent = `Результат: ${functions[0](args)}`;
          });
          document.querySelector('#btn_func_in_1').addEventListener('click', ({ target: t }) => {
            let count = +document.querySelector('.function_1').value;
            let div_func = t.parentNode;
            div_func.innerHTML = '<h3>Funtion 1</h3>';
            for (let i = 0; i < count; ++i) {
              div_func.innerHTML += '<input type="number" class="function_1"/> ';
            }
            let btn = document.createElement('button');
            btn.id = 'btn_func_1';
            btn.textContent = 'Первая'
            div_func.appendChild(btn);
            document.querySelector('#btn_func_1').addEventListener('click', ({ target: tg }) => {
              let args = [...document.querySelectorAll('.function_1')].map(input => +input.value);
              tg.textContent = `Результат: ${functions[1](args)}`;
            });
          });
        })();
      }
    </script>
    
  </body>
</html>
